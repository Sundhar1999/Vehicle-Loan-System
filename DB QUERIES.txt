
			DATABASE FOR VEHICLE LOAN SYSTEM


---------------------------------Creating Tables--------------------------------

CREATE TABLE USERS(
   U_ID   INT  NOT NULL PRIMARY KEY,
   VEH_ID INT NOT NULL,
   FIRST_NAME VARCHAR (20) NOT NULL,
   LAST_NAME VARCHAR (20) ,
   AGE  INT              NOT NULL,
   GENDER VARCHAR (10) NOT NULL,
   PHONE VARCHAR (20) NOT NULL,
   DATE_OF_BIRTH DATE,
   Email VARCHAR(320) UNIQUE,
   PASSWORD VARCHAR(20)  UNIQUE, 
   ADDRESS  VARCHAR (30) ,
   STATE CHAR(15),
   CITY CHAR(15),
   PINCODE INT NOT NULL UNIQUE
  
)


CREATE TABLE ADMIN(
   A_ID   INT  NOT NULL PRIMARY KEY,
   L_ID INT NOT NULL,
   LS_ID INT NOT NULL,
   FIRST_NAME VARCHAR (20) NOT NULL,
   LAST_NAME VARCHAR (20) ,
   GENDER VARCHAR (10) NOT NULL,
   PHONE VARCHAR (20) NOT NULL,
   DATE_OF_BIRTH DATE,
   Email VARCHAR(320) UNIQUE,
   PASSWORD VARCHAR(20)  UNIQUE, 
   ADDRESS  VARCHAR (30) 
)


CREATE TABLE ELIGIBILITY(
    DOC_ID INT NOT NULL PRIMARY KEY,
     U_ID  INT  NOT NULL,
    EMPLOYEMENT_TYPE VARCHAR(20) CHECK (EMPLOYEMENT_TYPE IN ('employee',' worker','self-employed')),
    ANNUAL_SALARY   DECIMAL (18, 2),
    EXISTING_EMI DECIMAL (18,2)

)


CREATE TABLE VEHICLEDETAILS(
    VEH_ID INT NOT NULL PRIMARY KEY,
    U_ID  INT  NOT NULL,
    CARMAKE VARCHAR2(20) NOT NULL,
    VEHICLE_TYPE VARCHAR2(20) NOT NULL,
    VEHICLE_PRICE DECIMAL (18,2),
    EX_SHOWROOMPRICE DECIMAL (18,2)

)
    

CREATE TABLE LOANDETAILS(
    L_ID INT NOT NULL PRIMARY KEY,
    U_ID INT  NOT NULL,
    LOAN_AMOUNT DECIMAL(18,2) NOT NULL,
    LOAN_TENURE_YEARS INT NOT NULL,
    RATEOFINTEREST_BIKE VARCHAR(10),
    RATEOFINTEREST_CAR VARCHAR(10),
    BEST_RATE DECIMAL(18,2) NOT NULL,
    PROCESSING_FEE DECIMAL(18,2) 

)


CREATE TABLE LOANSTATUS(
    LS_ID INT NOT NULL PRIMARY KEY,
     U_ID INT  NOT NULL,
     VEH_ID INT NOT NULL,
     L_ID INT NOT NULL,
     DOC_ID INT NOT NULL,
    STATUS VARCHAR(10) CHECK (STATUS IN ('ACCEPTED','REJECTED'))

)

----------------------------ADDING FOREIGN KEYS----------------------------

ALTER TABLE USERS
ADD CONSTRAINT fk_veh
  FOREIGN KEY (VEH_ID)
  REFERENCES VEHICLEDETAILS(VEH_ID);


ALTER TABLE ADMIN
ADD CONSTRAINT fk_loanid
  FOREIGN KEY (L_ID)
  REFERENCES LOANDETAILS(L_ID);
  
ALTER TABLE ADMIN
ADD CONSTRAINT fk_lsid
  FOREIGN KEY (LS_ID)
  REFERENCES LOANSTATUS(LS_ID);
  
ALTER TABLE ELIGIBILITY
ADD CONSTRAINT fk_user
  FOREIGN KEY (U_ID)
  REFERENCES USERS(U_ID);
  
ALTER TABLE VEHICLEDETAILS
ADD CONSTRAINT fk_userid
  FOREIGN KEY (U_ID)
  REFERENCES USERS(U_ID);
  
ALTER TABLE 
ADD CONSTRAINT fk_loanid
  FOREIGN KEY (L_ID)
  REFERENCES LOANDETAILS(L_ID);
  
ALTER TABLE LOANDETAILS
ADD CONSTRAINT fk_uid
  FOREIGN KEY (U_ID)
  REFERENCES USERS(U_ID);
  
ALTER TABLE LOANSTATUS
ADD CONSTRAINT fk_usersid
  FOREIGN KEY (U_ID)
  REFERENCES USERS(U_ID);
  
ALTER TABLE LOANSTATUS
ADD CONSTRAINT fk_vid
  FOREIGN KEY (VEH_ID)
  REFERENCES VEHICLEDETAILS(VEH_ID);
  
ALTER TABLE LOANSTATUS
ADD CONSTRAINT fk_lid
  FOREIGN KEY (L_ID)
  REFERENCES LOANDETAILS(L_ID);
  
ALTER TABLE LOANSTATUS
ADD CONSTRAINT fk_docid
  FOREIGN KEY (DOC_ID)
  REFERENCES ELIGIBILITY(DOC_ID);
  
select * from loanstatus

select * from all_constraints where table_name = 'LOANSTATUS'